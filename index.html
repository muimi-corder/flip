<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>Pure Physics: Bottle Flip</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.19.0/matter.min.js"></script>
    <style>
        body { margin: 0; overflow: hidden; background: #1a1a1a; } /* 集中しやすいダーク背景 */
        canvas { display: block; }
    </style>
</head>
<body>
<script>
    const { Engine, Render, Runner, Bodies, Composite, MouseConstraint, Mouse } = Matter;

    const engine = Engine.create();
    const render = Render.create({
        element: document.body,
        engine: engine,
        options: {
            width: window.innerWidth,
            height: window.innerHeight,
            wireframes: false, // 塗りつぶしあり
            background: '#1a1a1a'
        }
    });

    const wallOptions = { isStatic: true, render: { fillStyle: '#333' } };
    const thickness = 100;

    // 四方の壁（画面外に配置して、ボトルが逃げないようにする）
    const ground = Bodies.rectangle(window.innerWidth/2, window.innerHeight + thickness/2 - 20, window.innerWidth, thickness, wallOptions);
    const ceiling = Bodies.rectangle(window.innerWidth/2, -thickness/2, window.innerWidth, thickness, wallOptions);
    const leftWall = Bodies.rectangle(-thickness/2, window.innerHeight/2, thickness, window.innerHeight, wallOptions);
    const rightWall = Bodies.rectangle(window.innerWidth + thickness/2, window.innerHeight/2, thickness, window.innerHeight, wallOptions);

    // ペットボトル本体（少し縦長で角を丸く）
    const bottle = Bodies.rectangle(window.innerWidth/2, window.innerHeight - 100, 50, 120, {
        friction: 0.5,
        restitution: 0.4, // 少し跳ねる
        chamfer: { radius: 8 },
        render: { fillStyle: '#00a8ff' }
    });

    // マウス操作（掴んで投げる）
    const mouse = Mouse.create(render.canvas);
    const mouseConstraint = MouseConstraint.create(engine, {
        mouse: mouse,
        constraint: {
            stiffness: 0.1,
            render: { visible: false }
        }
    });

    Composite.add(engine.world, [ground, ceiling, leftWall, rightWall, bottle, mouseConstraint]);

    Render.run(render);
    Runner.run(Runner.create(), engine);

    // 画面リサイズ対応
    window.addEventListener('resize', () => {
        render.canvas.width = window.innerWidth;
        render.canvas.height = window.innerHeight;
    });
</script>
</body>
</html>
